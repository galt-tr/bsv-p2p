# 2026-02-19

## Mission Control Dashboard ‚Äî BUILT & LIVE
- Built from @AlexFinn's viral article (https://x.com/AlexFinn/status/2024169334344679783)
- **Tech:** NextJS 14 + SQLite (better-sqlite3 + Drizzle ORM) + Tailwind, dark theme
- **6 pages:** Dashboard, Tasks Board, Memory Browser, Calendar, Team, Content Pipeline, Office, Projects
- **REST APIs:** /api/tasks, /api/events, /api/team, /api/content, /api/memory, /api/projects
- **GitHub:** galt-tr/mission-control (private)
- **Running:** systemd user service on port 3333, exposed via ngrok at rearden-steel.ngrok.app
- Dylan chose SQLite over Convex (no vendor lock-in)
- Built by hand after Claude Code crashed (PTY bug)

## Multi-Agent Team ‚Äî OPERATIONAL
5 agents configured in gateway, all with heartbeats:
- üêÜ **Ghanima** (main, id=1) ‚Äî Opus, 15m heartbeat, Telegram channel. Team lead + Dylan's interface.
- üìã **PM** (pm, id=7) ‚Äî Sonnet, 10m heartbeat. Task triage and assignment.
- üíª **Coder** (coder, id=2) ‚Äî Sonnet, 10m heartbeat. Primary developer.
- ü¶Å **Leto** (leto, id=6) ‚Äî Sonnet, 10m heartbeat. Secondary developer.
- üîç **QA** (qa, id=9) ‚Äî Sonnet, 10m heartbeat. Quality engineer.

### Agent Workspaces
- Each agent has own workspace: `~/.openclaw/workspace-{name}/`
- Shared files via symlinks: TASK_LIFECYCLE.md, project-contexts/, ~/projects/
- Auth profiles copied from main to each agent

### Key Architecture Decisions
- **Task board is the nervous system** ‚Äî ALL agent work tracked via Mission Control tasks
- **TASK_LIFECYCLE.md** ‚Äî shared protocol symlinked into every workspace, enforces todo‚Üíin-progress‚Üídone
- **Project context files** ‚Äî `~/.openclaw/project-contexts/{project}.md` with architecture, gotchas, memory file references
- **Fresh context per task** ‚Äî devs request /new after each task to clear context window
- **PM audits board health** ‚Äî fixes stuck tasks, balances workload
- **Ghanima sends team summaries** to Dylan on heartbeat

### Removed: Assistant agent ‚Äî merged calendar/reminder duties into Ghanima

## Shared Git Repos
- `~/projects/bsv-p2p/` ‚Üí symlink to `~/.openclaw/workspace/bsv-p2p/` (GitHub: galt-tr/bsv-p2p)
- `~/projects/mission-control/` ‚Üí symlink to `~/mission-control/` (GitHub: galt-tr/mission-control)
- All agent workspaces have `~/projects/` symlinked in

## Task Board Results (as of 5:56 PM)
- **32 tasks completed** in one afternoon
- **5 remaining** (all low/medium P2P work)
- Coder completed ~22 tasks, Leto ~3, QA ~1, Ghanima ~1
- QA filed 10 bugs, all fixed by Coder

## Key Bugs & Lessons

### Claude Code PTY Bug
- Crashes with `pty:true` on this machine. Works fine with `-p` (print mode).
- Root cause: google-auth-library in Claude Code bundle breaks on PTY env

### Node Version Confusion
- `/usr/bin/node` = v22.20.0 (system, works with native modules)
- `/home/linuxbrew/.linuxbrew/bin/node` = v25.6.1 (too new for node-gyp)
- bsv-p2p MUST use `/usr/bin/node` for running and testing
- Dylan already had Node 22 ‚Äî didn't need to install anything

### Heartbeat Was Disabled for Main Agent!
- My heartbeat was `disabled` in config the entire time ‚Äî never sent Dylan summaries
- Other agents WERE working via heartbeats but silently (no Telegram channel)
- Fixed: enabled at 15m, other agents at 10m
- **Lesson:** Always verify your own heartbeat is enabled after config changes

### Browser/X Access
- Browser extension relay works for fetching X/Twitter articles
- yt-dlp doesn't work for tweets
- Must have Chrome extension attached to a tab

### QA Left Junk Tasks
- QA's security testing created 17 garbage tasks (SQL injection/XSS payloads as titles)
- Cleaned up manually. Need input sanitization on task creation.

### Leto Left Broken JSX
- Projects page had duplicate JSX causing build error. Fixed manually.
- Need code quality checks before commits.

## Memory Improvements Applied
From @KSimback's guide:
1. Memory Flush ‚Äî enabled at 40k token threshold
2. Context Pruning ‚Äî TTL 1h‚Üí6h, keepLastAssistants: 3
3. Hybrid Search ‚Äî vector (0.7) + BM25 (0.3)
4. Session indexing ‚Äî tried but `experimental` key rejected by openclaw config validator

## Waking Agents
- `/hooks/wake` only wakes default (main) agent
- `openclaw cron add --agent <id> --at "+Xm" --delete-after-run` is the way to force-wake specific agents
- Heartbeat timers create sessions automatically, no manual wake needed if intervals are short enough

## Agent Wallet & Bounty System Planned (6:55 PM)
- **13 WALLET tickets created** for per-agent BSV wallets and task bounty payments
- **Overlay plugin UNINSTALLED** ‚Äî Dylan said ditch it, use bsv-p2p's own Wallet class instead
- bsv-p2p Wallet (src/wallet/index.ts) already has: key gen, balance, UTXO tracking, send(), recordPayment()
- **Treasury model:** Ghanima's existing wallet (~/.bsv-p2p/) is the treasury. Dylan funds me, I pay agents.
- Each agent gets own wallet: private key + wallet.db in their workspace directory
- Task table gets: bounty_sats (default 0), bounty_status, bounty_tx_id
- Team table gets: bsv_address, bsv_balance, wallet_status, last_balance_update
- Agents report balance on every heartbeat
- All bounties default to 0 sats for now ‚Äî plumbing and UI built first
- New API: /wallet/setup, /wallet/balance, /wallet/fund, /wallet/bounty-pay, /wallet/transactions

## Task Board Status (6:57 PM)
- 49 done, 1 in-progress (Writer on plugin docs), 22 todo
- Writer agent is LIVE and working

## Researcher & Writer Agents Created (6:40 PM)
- Both were on team board but NOT configured as gateway agents ‚Äî tasks sat forever
- Created standardized agent provisioning script: `~/.openclaw/scripts/create-agent.sh`
  - Usage: `./create-agent.sh <id> <name> <emoji> <role> [model] [heartbeat]`
  - Handles: workspace, symlinks, auth profiles, AGENTS.md, openclaw.json, wake endpoint mapping
  - Still need manual: SOUL.md, HEARTBEAT.md, rebuild Mission Control, restart gateway
- **Researcher (üî¨, id=researcher, team_id=4):** Evidence-based, thorough, writes findings to docs/research dirs, creates follow-up implementation tasks
- **Writer (‚úçÔ∏è, id=writer, team_id=3):** Reader-obsessed tech writer, tests docs by running commands, progressive disclosure philosophy
- Both on Sonnet, 10m heartbeats
- **7 total agents now:** main, pm, coder, leto, qa, researcher, writer
- Task board at 6:49 PM: 44 done, 1 in-progress, 8 todo

## Mission Control Production Build (6:30 PM)
- Coder switched systemd service from `next dev` to `next start` (production mode) for performance
- Deleting `.next` cache crashes production mode ‚Äî must `npm run build` before restart
- **Lesson:** Always rebuild after code changes: `cd ~/projects/mission-control && npm run build && systemctl --user restart mission-control`

## Wake Button Name Mapping Bug (6:28 PM)
- Wake API had agent IDs (PM, Coder) but UI sent display names (Product Manager, Developer)
- Fixed: added aliases in `/api/agents/route.ts` ‚Äî "Product Manager"‚Üípm, "Developer"‚Üíleto, etc.
- Next.js production mode caches aggressively ‚Äî must delete `.next` and rebuild to pick up changes

## Task Board Status (6:32 PM)
- **39 tasks done** (up from 32), 13 todo, 1 in-progress
- PM distributed all 11 new P2P onboarding tickets across Leto, Coder, Researcher, Writer
- First heartbeat summary successfully sent to Dylan via Telegram

## BSV P2P Onboarding Review (6:27 PM)
- Comprehensive review of bsv-p2p project for new user/bot onboarding
- **11 new tickets filed** covering: automated setup script, cross-platform daemon management (systemd/launchd), native OpenClaw plugin integration, documentation rewrite, root directory cleanup, status/doctor CLI, first-run experience, security audit (plaintext keys), npm publication, peer discovery service, graceful error messages
- Key insight: technically impressive but onboarding is terrible ‚Äî no one-command setup, no persistent daemon management, incomplete/inconsistent docs, 20+ loose test files in root
- Referenced mcporter skill's `daemon start/stop/status` pattern as model to follow
- Researching native OpenClaw plugin integration (like overlay plugin) to eliminate separate daemon

## Agent Active Status Bug Fix (6:20 PM)
- Agents showed "offline" while actively working ‚Äî lastSeenAt-based detection insufficient
- Fixed: GET /api/team now cross-references in-progress tasks. If agent has an in-progress task, status="active" and currentTask auto-populated from task title
- Committed and pushed to galt-tr/mission-control

## Interactive Mission Control (6 PM)
- Dylan wants to manage agents from the dashboard UI
- Task created for: assignee dropdowns on cards, "Wake Agent" buttons, "Assign & Wake" combo, priority cycling, bulk actions
- Key: `/api/agents/wake` endpoint shells out to `openclaw cron add --agent <id>` to force-wake agents
- Agent IDs for wake: main, pm, coder, leto, qa
- Coder woken to pick up this high-priority task

## Google Calendar
- `gog` installed but not authenticated ‚Äî needs Google Cloud OAuth setup
- Calendar sync + 1-hour-before alerts planned but blocked on auth
